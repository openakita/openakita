{
  "openapi": "3.1.0",
  "info": {
    "title": "OpenAkita API",
    "description": "OpenAkita HTTP API，用于对话、健康检查、技能管理等。",
    "version": "1.24.2+unknown"
  },
  "paths": {
    "/api/system-info": {
      "get": {
        "summary": "获取系统信息",
        "description": "返回系统环境信息，用于在 Bug 报告表单中显示。",
        "operationId": "get_system_info_api_system_info_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/bug-report": {
      "post": {
        "summary": "提交 Bug 报告",
        "description": "提交包含系统信息、日志和 LLM 调试文件的 Bug 报告。",
        "operationId": "submit_bug_report_api_bug_report_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_submit_bug_report_api_bug_report_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/feature-request": {
      "post": {
        "summary": "提交功能建议",
        "description": "提交功能/需求建议，包含可选的联系方式和附件。",
        "operationId": "submit_feature_request_api_feature_request_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_submit_feature_request_api_feature_request_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/chat": {
      "post": {
        "summary": "对话",
        "description": "SSE 流式对话接口。\n\n使用完整的 Agent 管道（与 IM/CLI 通道共享），\n通过 Agent.chat_with_session_stream() 实现。\n\n返回包含以下事件类型的 Server-Sent Events：\n- thinking_start / thinking_delta / thinking_end\n- text_delta\n- tool_call_start / tool_call_end\n- plan_created / plan_step_updated\n- ask_user\n- agent_switch\n- error\n- done",
        "operationId": "chat_api_chat_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/chat/answer": {
      "post": {
        "summary": "回复对话",
        "description": "处理用户对 ask_user 事件的回答。",
        "operationId": "chat_answer_api_chat_answer_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatAnswerRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/chat/cancel": {
      "post": {
        "summary": "取消对话",
        "description": "全局取消当前正在运行的任务。",
        "operationId": "chat_cancel_api_chat_cancel_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatControlRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/chat/skip": {
      "post": {
        "summary": "跳过步骤",
        "description": "跳过当前正在运行的工具/步骤（不终止任务）。",
        "operationId": "chat_skip_api_chat_skip_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatControlRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/chat/insert": {
      "post": {
        "summary": "插入消息",
        "description": "将用户消息插入到正在运行的任务上下文中。\n\n智能路由：如果消息是停止/跳过命令，自动委托给 cancel/skip 接口，而不是盲目插入。",
        "operationId": "chat_insert_api_chat_insert_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatControlRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/models": {
      "get": {
        "summary": "获取模型列表",
        "description": "列出可用的 LLM 端点/模型。",
        "operationId": "list_models_api_models_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/config/workspace-info": {
      "get": {
        "summary": "工作区信息",
        "description": "返回当前工作区路径和基本信息。",
        "operationId": "workspace_info_api_config_workspace_info_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/config/env": {
      "get": {
        "summary": "读取环境变量",
        "description": "读取 .env 文件内容为键值对。",
        "operationId": "read_env_api_config_env_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      },
      "post": {
        "summary": "写入环境变量",
        "description": "更新 .env 文件中的键值对（合并模式，保留注释）。",
        "operationId": "write_env_api_config_env_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EnvUpdateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/config/endpoints": {
      "get": {
        "summary": "Read Endpoints",
        "description": "读取 data/llm_endpoints.json 配置文件。",
        "operationId": "read_endpoints_api_config_endpoints_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      },
      "post": {
        "summary": "Write Endpoints",
        "description": "写入 data/llm_endpoints.json 配置文件。",
        "operationId": "write_endpoints_api_config_endpoints_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EndpointsWriteRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/config/reload": {
      "post": {
        "summary": "重载配置",
        "description": "从磁盘热重载 LLM 端点配置到运行中的 Agent。\n\nThis should be called after writing llm_endpoints.json so the running\nservice picks up changes without a full restart.",
        "operationId": "reload_config_api_config_reload_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/config/restart": {
      "post": {
        "summary": "重启服务",
        "description": "触发服务优雅重启。\n\n流程：设置重启标志 → 触发 shutdown_event → serve() 主循环检测标志后重新初始化。\n前端应在调用后轮询 /api/health 直到服务恢复。",
        "operationId": "restart_service_api_config_restart_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/modules/refresh": {
      "post": {
        "summary": "Refresh Module Paths",
        "description": "运行时重新扫描并注入可选模块路径到 sys.path。\n\n模块安装/卸载后调用此端点，可在不重启服务的情况下让 Python 发现新模块。\n注意：某些模块（如依赖 torch 的 whisper）可能仍需完整重启才能正确加载 DLL。",
        "operationId": "refresh_module_paths_api_modules_refresh_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/config/skills": {
      "get": {
        "summary": "读取技能配置",
        "description": "读取 data/skills.json（技能选择/白名单）。",
        "operationId": "read_skills_config_api_config_skills_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      },
      "post": {
        "summary": "写入技能配置",
        "description": "写入 data/skills.json 配置文件。",
        "operationId": "write_skills_config_api_config_skills_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SkillsWriteRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/config/disabled-views": {
      "get": {
        "summary": "Read Disabled Views",
        "description": "读取已禁用的模块视图列表。",
        "operationId": "read_disabled_views_api_config_disabled_views_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      },
      "post": {
        "summary": "Write Disabled Views",
        "description": "更新已禁用的模块视图列表。",
        "operationId": "write_disabled_views_api_config_disabled_views_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DisabledViewsRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/config/providers": {
      "get": {
        "summary": "List Providers Api",
        "description": "返回后端已注册的 LLM 服务商列表。\n\n前端可在后端运行时通过此 API 获取最新的 provider 列表，\n确保前后端数据一致。",
        "operationId": "list_providers_api_api_config_providers_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/config/list-models": {
      "post": {
        "summary": "List Models Api",
        "description": "拉取 LLM 端点的模型列表（远程模式替代 Tauri openakita_list_models 命令）。\n\n直接复用 bridge.list_models 的逻辑，在后端进程内异步调用，无需 subprocess。",
        "operationId": "list_models_api_api_config_list_models_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ListModelsRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/files": {
      "get": {
        "tags": [
          "files"
        ],
        "summary": "Serve File",
        "description": "从工作区目录提供文件服务。\n\n查询参数 `path` 可以是相对于工作区根目录的路径或绝对路径。\nExample: /api/files?path=data/temp/image.png\nExample: /api/files?path=D:/coder/myagent/data/temp/image.png",
        "operationId": "serve_file_api_files_get",
        "parameters": [
          {
            "name": "path",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "",
              "title": "Path"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/health": {
      "get": {
        "summary": "Health",
        "description": "Basic health check - returns 200 if server is running.",
        "operationId": "health_api_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/health/check": {
      "post": {
        "summary": "Health Check",
        "description": "Check health of a specific LLM endpoint or all endpoints.\n\nUses dry_run mode: sends a real test request but does NOT modify\nthe provider's healthy/cooldown state, ensuring no interference\nwith ongoing Agent LLM calls.",
        "operationId": "health_check_api_health_check_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/HealthCheckRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/im/channels": {
      "get": {
        "summary": "获取频道列表",
        "description": "返回所有已配置的 IM 频道及其在线状态。",
        "operationId": "list_channels_api_im_channels_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/im/sessions": {
      "get": {
        "summary": "获取会话列表",
        "description": "返回指定 IM 频道的会话。",
        "operationId": "list_sessions_api_im_sessions_get",
        "parameters": [
          {
            "name": "channel",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "",
              "title": "Channel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/im/sessions/{session_id}/messages": {
      "get": {
        "summary": "Get Session Messages",
        "description": "返回指定会话的消息。",
        "operationId": "get_session_messages_api_im_sessions__session_id__messages_get",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/logs/service": {
      "get": {
        "summary": "Service Log",
        "description": "读取后端服务日志文件尾部内容。\n\n返回格式与 Tauri openakita_service_log 命令一致：\n{ path, content, truncated }",
        "operationId": "service_log_api_logs_service_get",
        "parameters": [
          {
            "name": "tail_bytes",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 400000,
              "minimum": 0,
              "description": "读取尾部字节数",
              "default": 60000,
              "title": "Tail Bytes"
            },
            "description": "读取尾部字节数"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/mcp/servers": {
      "get": {
        "summary": "获取 MCP 服务器列表",
        "description": "列出所有 MCP 服务器及其配置和连接状态。",
        "operationId": "list_mcp_servers_api_mcp_servers_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/mcp/connect": {
      "post": {
        "summary": "Connect Mcp Server",
        "description": "Connect to a specific MCP server.",
        "operationId": "connect_mcp_server_api_mcp_connect_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MCPConnectRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/mcp/disconnect": {
      "post": {
        "summary": "Disconnect Mcp Server",
        "description": "断开与指定 MCP 服务器的连接。",
        "operationId": "disconnect_mcp_server_api_mcp_disconnect_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MCPConnectRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/mcp/tools": {
      "get": {
        "summary": "获取 MCP 工具列表",
        "description": "列出所有可用的 MCP 工具，可选择按服务器过滤。",
        "operationId": "list_mcp_tools_api_mcp_tools_get",
        "parameters": [
          {
            "name": "server",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Server"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/mcp/instructions/{server_name}": {
      "get": {
        "summary": "获取 MCP 使用说明",
        "description": "获取指定 MCP 服务器的 INSTRUCTIONS.md 说明文档。",
        "operationId": "get_mcp_instructions_api_mcp_instructions__server_name__get",
        "parameters": [
          {
            "name": "server_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Server Name"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/mcp/servers/add": {
      "post": {
        "summary": "添加 MCP 服务器",
        "description": "添加新的 MCP 服务器配置（持久化存储在工作区 data/mcp/servers/ 目录）。",
        "operationId": "add_mcp_server_api_mcp_servers_add_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MCPServerAddRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/mcp/servers/{server_name}": {
      "delete": {
        "summary": "移除 MCP 服务器",
        "description": "移除 MCP 服务器配置（仅限工作区配置，不包含内置配置）。",
        "operationId": "remove_mcp_server_api_mcp_servers__server_name__delete",
        "parameters": [
          {
            "name": "server_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Server Name"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/memories": {
      "get": {
        "tags": [
          "memory"
        ],
        "summary": "获取记忆列表",
        "operationId": "list_memories_api_memories_get",
        "parameters": [
          {
            "name": "type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Type"
            }
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Search"
            }
          },
          {
            "name": "min_score",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "default": 0.0,
              "title": "Min Score"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 200,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/memories/stats": {
      "get": {
        "tags": [
          "memory"
        ],
        "summary": "记忆统计",
        "operationId": "memory_stats_api_memories_stats_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/memories/{memory_id}": {
      "get": {
        "tags": [
          "memory"
        ],
        "summary": "获取单条记忆",
        "operationId": "get_memory_api_memories__memory_id__get",
        "parameters": [
          {
            "name": "memory_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Memory Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "memory"
        ],
        "summary": "Update Memory",
        "operationId": "update_memory_api_memories__memory_id__put",
        "parameters": [
          {
            "name": "memory_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Memory Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MemoryUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "memory"
        ],
        "summary": "Delete Memory",
        "operationId": "delete_memory_api_memories__memory_id__delete",
        "parameters": [
          {
            "name": "memory_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Memory Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/memories/batch-delete": {
      "post": {
        "tags": [
          "memory"
        ],
        "summary": "Batch Delete",
        "operationId": "batch_delete_api_memories_batch_delete_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/memories/review": {
      "post": {
        "tags": [
          "memory"
        ],
        "summary": "Trigger Review",
        "description": "触发 LLM 驱动的记忆回顾（同 consolidate_memories 工具）。",
        "operationId": "trigger_review_api_memories_review_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/memories/refresh-md": {
      "post": {
        "tags": [
          "memory"
        ],
        "summary": "Refresh Md",
        "description": "根据当前数据库状态重建 MEMORY.md 索引文件。",
        "operationId": "refresh_md_api_memories_refresh_md_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/scheduler/tasks": {
      "get": {
        "summary": "获取任务列表",
        "description": "列出所有定时任务。",
        "operationId": "list_tasks_api_scheduler_tasks_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create Task",
        "description": "Create a new scheduled task.",
        "operationId": "create_task_api_scheduler_tasks_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TaskCreateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/scheduler/tasks/{task_id}": {
      "get": {
        "summary": "获取单条任务",
        "description": "根据 ID 获取单个任务详情。",
        "operationId": "get_task_api_scheduler_tasks__task_id__get",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "更新定时任务",
        "description": "更新现有的定时任务。",
        "operationId": "update_task_api_scheduler_tasks__task_id__put",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TaskUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "删除定时任务",
        "description": "Delete a scheduled task.",
        "operationId": "delete_task_api_scheduler_tasks__task_id__delete",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/scheduler/tasks/{task_id}/toggle": {
      "post": {
        "summary": "Toggle Task",
        "description": "切换任务的启用/禁用状态。",
        "operationId": "toggle_task_api_scheduler_tasks__task_id__toggle_post",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/scheduler/tasks/{task_id}/trigger": {
      "post": {
        "summary": "Trigger Task",
        "description": "立即触发执行一个任务。",
        "operationId": "trigger_task_api_scheduler_tasks__task_id__trigger_post",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/scheduler/channels": {
      "get": {
        "summary": "获取频道列表",
        "description": "列出可用的 IM 频道及其 chat_id，用于定向通知。",
        "operationId": "list_channels_api_scheduler_channels_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/scheduler/stats": {
      "get": {
        "summary": "Scheduler Stats",
        "description": "获取调度器统计信息。",
        "operationId": "scheduler_stats_api_scheduler_stats_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/sessions": {
      "get": {
        "summary": "获取会话列表",
        "description": "列出指定频道的会话（默认：desktop）。\n\n返回包含元数据的会话列表，按最后活动时间降序排列。",
        "operationId": "list_sessions_api_sessions_get",
        "parameters": [
          {
            "name": "channel",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "desktop",
              "title": "Channel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/sessions/{conversation_id}/history": {
      "get": {
        "summary": "Get Session History",
        "description": "获取指定会话的历史消息记录。\n\n返回兼容前端 ChatMessage 类型的消息列表。",
        "operationId": "get_session_history_api_sessions__conversation_id__history_get",
        "parameters": [
          {
            "name": "conversation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Conversation Id"
            }
          },
          {
            "name": "channel",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "desktop",
              "title": "Channel"
            }
          },
          {
            "name": "user_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "desktop_user",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/skills": {
      "get": {
        "summary": "获取技能列表",
        "description": "列出所有可用技能及其配置模式。\n\nReturns ALL discovered skills (including disabled ones) with correct\n``enabled`` status derived from ``data/skills.json`` allowlist.",
        "operationId": "list_skills_api_skills_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/skills/config": {
      "post": {
        "summary": "更新技能配置",
        "description": "更新技能配置。",
        "operationId": "update_skill_config_api_skills_config_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/skills/install": {
      "post": {
        "summary": "安装技能",
        "description": "安装技能（远程模式替代 Tauri openakita_install_skill 命令）。\n\nPOST body: { \"url\": \"github:user/repo/skill\" }\n安装完成后自动重新加载技能并应用 allowlist。",
        "operationId": "install_skill_api_skills_install_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/skills/reload": {
      "post": {
        "summary": "重载技能",
        "description": "热重载技能（安装新技能后、修改 SKILL.md 后、切换启用/禁用后调用）。\n\nPOST 请求体：{ \"skill_name\": \"optional-name\" }\n如果 skill_name 为空或未提供，则重新扫描并加载所有技能。\n全量重载后会重新读取 data/skills.json 的 allowlist 并裁剪禁用技能。",
        "operationId": "reload_skills_api_skills_reload_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/skills/marketplace": {
      "get": {
        "summary": "Search Marketplace",
        "description": "代理 skills.sh 搜索 API（绕过桌面应用的 CORS 限制）。",
        "operationId": "search_marketplace_api_skills_marketplace_get",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "agent",
              "title": "Q"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/stats/tokens/summary": {
      "get": {
        "tags": [
          "token_stats"
        ],
        "summary": "Summary",
        "operationId": "summary_api_stats_tokens_summary_get",
        "parameters": [
          {
            "name": "group_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "endpoint_name",
              "title": "Group By"
            }
          },
          {
            "name": "period",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Period"
            }
          },
          {
            "name": "start",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Start"
            }
          },
          {
            "name": "end",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "End"
            }
          },
          {
            "name": "endpoint_name",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Endpoint Name"
            }
          },
          {
            "name": "operation_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Operation Type"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/stats/tokens/timeline": {
      "get": {
        "tags": [
          "token_stats"
        ],
        "summary": "Timeline",
        "operationId": "timeline_api_stats_tokens_timeline_get",
        "parameters": [
          {
            "name": "interval",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "hour",
              "title": "Interval"
            }
          },
          {
            "name": "period",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Period"
            }
          },
          {
            "name": "start",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Start"
            }
          },
          {
            "name": "end",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "End"
            }
          },
          {
            "name": "endpoint_name",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Endpoint Name"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/stats/tokens/sessions": {
      "get": {
        "tags": [
          "token_stats"
        ],
        "summary": "Sessions",
        "operationId": "sessions_api_stats_tokens_sessions_get",
        "parameters": [
          {
            "name": "period",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Period"
            }
          },
          {
            "name": "start",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Start"
            }
          },
          {
            "name": "end",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "End"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/stats/tokens/total": {
      "get": {
        "tags": [
          "token_stats"
        ],
        "summary": "Total",
        "operationId": "total_api_stats_tokens_total_get",
        "parameters": [
          {
            "name": "period",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Period"
            }
          },
          {
            "name": "start",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Start"
            }
          },
          {
            "name": "end",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "End"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/stats/tokens/context": {
      "get": {
        "tags": [
          "token_stats"
        ],
        "summary": "Context",
        "description": "返回当前会话的上下文 Token 使用量和限制。",
        "operationId": "context_api_stats_tokens_context_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/upload": {
      "post": {
        "summary": "上传文件",
        "description": "上传文件（图片、音频、文档）。\n返回文件 URL，用于在对话消息中使用。",
        "operationId": "upload_file_api_upload_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_file_api_upload_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/uploads/{filename}": {
      "get": {
        "summary": "Serve Upload",
        "description": "通过唯一文件名提供已上传文件的访问。",
        "operationId": "serve_upload_api_uploads__filename__get",
        "parameters": [
          {
            "name": "filename",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Filename"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "summary": "Root",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/shutdown": {
      "post": {
        "summary": "Shutdown",
        "description": "优雅地关闭 OpenAkita 服务进程。\n\nUses the shared shutdown_event to trigger the same graceful cleanup\npath as SIGINT/SIGTERM (sessions saved, IM adapters stopped, etc.).",
        "operationId": "shutdown_api_shutdown_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AttachmentInfo": {
        "properties": {
          "type": {
            "type": "string",
            "title": "Type",
            "description": "image(图片) | file(文件) | voice(语音)"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "文件名"
          },
          "url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Url",
            "description": "URL 或 Data URI"
          },
          "mime_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mime Type",
            "description": "MIME 类型"
          }
        },
        "type": "object",
        "required": [
          "type",
          "name"
        ],
        "title": "AttachmentInfo",
        "description": "Attachment metadata."
      },
      "Body_submit_bug_report_api_bug_report_post": {
        "properties": {
          "title": {
            "type": "string",
            "title": "Title"
          },
          "description": {
            "type": "string",
            "title": "Description"
          },
          "turnstile_token": {
            "type": "string",
            "title": "Turnstile Token"
          },
          "steps": {
            "type": "string",
            "title": "Steps",
            "default": ""
          },
          "upload_logs": {
            "type": "boolean",
            "title": "Upload Logs",
            "default": true
          },
          "upload_debug": {
            "type": "boolean",
            "title": "Upload Debug",
            "default": true
          },
          "images": {
            "anyOf": [
              {
                "items": {
                  "type": "string",
                  "contentMediaType": "application/octet-stream"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Images"
          }
        },
        "type": "object",
        "required": [
          "title",
          "description",
          "turnstile_token"
        ],
        "title": "Body_submit_bug_report_api_bug_report_post"
      },
      "Body_submit_feature_request_api_feature_request_post": {
        "properties": {
          "title": {
            "type": "string",
            "title": "Title"
          },
          "description": {
            "type": "string",
            "title": "Description"
          },
          "turnstile_token": {
            "type": "string",
            "title": "Turnstile Token"
          },
          "contact_email": {
            "type": "string",
            "title": "Contact Email",
            "default": ""
          },
          "contact_wechat": {
            "type": "string",
            "title": "Contact Wechat",
            "default": ""
          },
          "images": {
            "anyOf": [
              {
                "items": {
                  "type": "string",
                  "contentMediaType": "application/octet-stream"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Images"
          }
        },
        "type": "object",
        "required": [
          "title",
          "description",
          "turnstile_token"
        ],
        "title": "Body_submit_feature_request_api_feature_request_post"
      },
      "Body_upload_file_api_upload_post": {
        "properties": {
          "file": {
            "type": "string",
            "contentMediaType": "application/octet-stream",
            "title": "File"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_upload_file_api_upload_post"
      },
      "ChatAnswerRequest": {
        "properties": {
          "conversation_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Conversation Id"
          },
          "answer": {
            "type": "string",
            "title": "Answer",
            "default": ""
          }
        },
        "type": "object",
        "title": "ChatAnswerRequest",
        "description": "Answer to an ask_user event."
      },
      "ChatControlRequest": {
        "properties": {
          "conversation_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Conversation Id",
            "description": "会话 ID"
          },
          "reason": {
            "type": "string",
            "title": "Reason",
            "description": "控制操作的原因",
            "default": ""
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "用户消息（仅用于插入）",
            "default": ""
          }
        },
        "type": "object",
        "title": "ChatControlRequest",
        "description": "对话控制操作（取消/跳过/插入）的请求体。"
      },
      "ChatRequest": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message",
            "description": "用户消息文本",
            "default": ""
          },
          "conversation_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Conversation Id",
            "description": "会话 ID（上下文）"
          },
          "plan_mode": {
            "type": "boolean",
            "title": "Plan Mode",
            "description": "强制计划模式",
            "default": false
          },
          "endpoint": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Endpoint",
            "description": "指定端点名称（null=自动）"
          },
          "attachments": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/AttachmentInfo"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Attachments",
            "description": "附件文件/图片"
          },
          "thinking_mode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thinking Mode",
            "description": "思考模式覆盖：'auto'(系统决定), 'on'(强制开启), 'off'(强制关闭)。null=使用系统默认。"
          },
          "thinking_depth": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thinking Depth",
            "description": "思考深度：'low', 'medium', 'high'。仅在思考模式开启时有效。"
          }
        },
        "type": "object",
        "title": "ChatRequest",
        "description": "Chat request body."
      },
      "DisabledViewsRequest": {
        "properties": {
          "views": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Views"
          }
        },
        "type": "object",
        "required": [
          "views"
        ],
        "title": "DisabledViewsRequest"
      },
      "EndpointsWriteRequest": {
        "properties": {
          "content": {
            "additionalProperties": true,
            "type": "object",
            "title": "Content"
          }
        },
        "type": "object",
        "required": [
          "content"
        ],
        "title": "EndpointsWriteRequest"
      },
      "EnvUpdateRequest": {
        "properties": {
          "entries": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Entries"
          }
        },
        "type": "object",
        "required": [
          "entries"
        ],
        "title": "EnvUpdateRequest"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HealthCheckRequest": {
        "properties": {
          "endpoint_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Endpoint Name"
          },
          "channel": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Channel"
          }
        },
        "type": "object",
        "title": "HealthCheckRequest",
        "description": "健康检查请求。"
      },
      "ListModelsRequest": {
        "properties": {
          "api_type": {
            "type": "string",
            "title": "Api Type"
          },
          "base_url": {
            "type": "string",
            "title": "Base Url"
          },
          "provider_slug": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider Slug"
          },
          "api_key": {
            "type": "string",
            "title": "Api Key"
          }
        },
        "type": "object",
        "required": [
          "api_type",
          "base_url",
          "api_key"
        ],
        "title": "ListModelsRequest"
      },
      "MCPConnectRequest": {
        "properties": {
          "server_name": {
            "type": "string",
            "title": "Server Name"
          }
        },
        "type": "object",
        "required": [
          "server_name"
        ],
        "title": "MCPConnectRequest"
      },
      "MCPServerAddRequest": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "transport": {
            "type": "string",
            "title": "Transport",
            "default": "stdio"
          },
          "command": {
            "type": "string",
            "title": "Command",
            "default": ""
          },
          "args": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Args",
            "default": []
          },
          "env": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Env",
            "default": {}
          },
          "url": {
            "type": "string",
            "title": "Url",
            "default": ""
          },
          "description": {
            "type": "string",
            "title": "Description",
            "default": ""
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "MCPServerAddRequest"
      },
      "MemoryUpdateRequest": {
        "properties": {
          "content": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content"
          },
          "importance_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Importance Score"
          },
          "tags": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tags"
          }
        },
        "type": "object",
        "title": "MemoryUpdateRequest"
      },
      "SkillsWriteRequest": {
        "properties": {
          "content": {
            "additionalProperties": true,
            "type": "object",
            "title": "Content"
          }
        },
        "type": "object",
        "required": [
          "content"
        ],
        "title": "SkillsWriteRequest"
      },
      "TaskCreateRequest": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "task_type": {
            "type": "string",
            "title": "Task Type",
            "default": "reminder"
          },
          "trigger_type": {
            "type": "string",
            "title": "Trigger Type",
            "default": "once"
          },
          "trigger_config": {
            "additionalProperties": true,
            "type": "object",
            "title": "Trigger Config",
            "default": {}
          },
          "reminder_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reminder Message"
          },
          "prompt": {
            "type": "string",
            "title": "Prompt",
            "default": ""
          },
          "channel_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Channel Id"
          },
          "chat_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chat Id"
          },
          "enabled": {
            "type": "boolean",
            "title": "Enabled",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "TaskCreateRequest"
      },
      "TaskUpdateRequest": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "task_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Task Type"
          },
          "trigger_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trigger Type"
          },
          "trigger_config": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trigger Config"
          },
          "reminder_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reminder Message"
          },
          "prompt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Prompt"
          },
          "channel_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Channel Id"
          },
          "chat_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chat Id"
          },
          "enabled": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Enabled"
          }
        },
        "type": "object",
        "title": "TaskUpdateRequest"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          },
          "input": {
            "title": "Input"
          },
          "ctx": {
            "type": "object",
            "title": "Context"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    }
  }
}