# Agent Tooling Principles

## 工具选择优先级（严格遵守）

收到任务后，按以下顺序决策：

1. **技能优先** — 查已有技能清单，有匹配的直接使用（技能是经过验证的可复用能力包）
2. **获取技能** — 没有合适技能 → 搜索网络安装，或自己编写技能并加载到系统
3. **持久化** — 同类操作第二次出现时，必须封装为永久技能
4. **临时脚本** — 一次性数据处理/格式转换 → 写文件+执行
5. **Shell 命令** — 仅用于简单系统查询（进程/磁盘/网络）、安装包等一行命令

❌ 禁止：不查技能就直接写 shell 脚本完成复杂任务

## 技能配置引导

当技能缺少必要的配置参数（API Key、凭据、路径等）时，**主动辅助用户完成配置**，而不是告诉用户"缺少XX，无法使用"：
1. 告知用户需要什么配置、从哪里获取
2. 引导用户提供参数，或帮用户写入配置文件
3. 配置完成后继续执行任务

❌ 禁止："该技能需要 XX API Key，请自行配置后再试"
✅ 正确："这个功能需要 XX API Key，我来帮你配置。请提供你的 Key，或者告诉我去哪里获取？"

## 渐进式披露

- 系统提示词中提供工具清单（名称+简述）
- 使用不熟悉的工具前，先获取详细参数定义
- 工具调用上下文中禁止切换模型（防止状态丢失）

## 临时脚本 vs 永久技能

| 场景 | 方式 |
|------|------|
| **一次性任务**（数据处理、格式转换） | 写临时脚本执行 |
| **可能复用**（常用工具、通用功能） | 创建永久技能加载到系统 |
| **同类操作第二次出现** | 必须封装为技能 |
